<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Object-oriented JavaScript example</title>
  </head>

  <body>
    <p>This example requires you to enter commands in your browser's JavaScript console (see <a href="https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools">What are browser developer tools</a> for more information).</p>
    
    <script>
        const person = {
            name: ["Bob", "Smith"],
            age: 32,
            bio: function () {
                console.log(`${this.name[0]} ${this.name[1]} is ${this.age} years old.`);
            },
            introduceSelf: function () {
                console.log(`Hi! I'm ${this.name[0]}.`);
            },
        };

        function Person(name) {
            this.name = name;
            this.introduceSelf = function () {
                console.log(`Hi! I'm ${this.name}.`);
            };
        }

        const salva = new Person("Salva");
        salva.introduceSelf();
        // "Hi! I'm Salva."

        const frankie = new Person("Frankie");
        frankie.introduceSelf();
        // "Hi! I'm Frankie."

        function sumOfTripledEvens(array) {
            //Take in an array.
            //For every even number, it will triple it.
            //Then it will sum all those even numbers.
            // let evenNumbers = array.filter(num => num % 2 == 0);
            // evenNumbers = evenNumbers.map(num => num * 3);
            // evenNumbers = evenNumbers.reduce((total, num) => {
            //     return total += num;
            // });
            return array
                .filter(num => num % 2 == 0)
                .map(num => num * 3)
                .reduce((total, num) => {return total += num;});
        }

        //const arr = [1, 2, 3, 4, 5];
        //const result = sumOfTripledEvens(arr);

        function filterRangeInPlace(arr, a, b) {
            arr.forEach((item, index) => {
                if(item < a || item > b) {
                    arr.splice(index, 1);
                }
            });
        }

        // let arr = [5, 3, 8, 1];
        // filterRangeInPlace(arr, 1, 4);
 

        // let arr = [5, 2, 1, -10, 8];
        // arr.sort((a, b) => b - a);
        // console.log( arr ); // 8, 5, 2, 1, -10


        function copySorted(arr) {
            const copyArr = arr.slice();
            return copyArr.sort();
        }

        // let arr = ["HTML", "JavaScript", "CSS"];
        // let sorted = copySorted(arr);
        // console.log( sorted ); // CSS, HTML, JavaScript
        // console.log( arr ); // HTML, JavaScript, CSS (no changes)


        // let john = { name: "John", surname: "Smith", id: 1 };
        // let pete = { name: "Pete", surname: "Hunt", id: 2 };
        // let mary = { name: "Mary", surname: "Key", id: 3 };

        // let users = [ john, pete, mary ];

        // let usersMapped = users.map(user => ({
        //     fullName: `${user.name} ${user.surname}`,
        //     id: user.id

        // }));
        /*
        usersMapped = [
        { fullName: "John Smith", id: 1 },
        { fullName: "Pete Hunt", id: 2 },
        { fullName: "Mary Key", id: 3 }
        ]
        */

        // console.log( usersMapped[0].id ) // 1
        // console.log( usersMapped[0].fullName ) // John Smith




        function sortByAge(users) {
            users.sort((a, b) => a.age - b.age);
        }

        // let john = { name: "John", age: 25 };
        // let pete = { name: "Pete", age: 30 };
        // let mary = { name: "Mary", age: 28 };

        // let arr = [ pete, john, mary ];

        // sortByAge(arr);

        // now: [john, mary, pete]
        // console.log(arr[0].name); // John
        // console.log(arr[1].name); // Mary
        // console.log(arr[2].name); // Pete


        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                let j = Math.floor(Math.random() * (i + 1)); // random index from 0 to i

                // swap elements array[i] and array[j]
                // we use "destructuring assignment" syntax to achieve that
                // you'll find more details about that syntax in later chapters
                // same can be written as:
                // let t = array[i]; array[i] = array[j]; array[j] = t
                [array[i], array[j]] = [array[j], array[i]];
            }
            console.log(array);
        }

        // // counts of appearances for all possible permutations
        // let count = {
        //     '123': 0,
        //     '132': 0,
        //     '213': 0,
        //     '231': 0,
        //     '321': 0,
        //     '312': 0
        // };

        // for (let i = 0; i < 1000000; i++) {
        //     let array = [1, 2, 3];
        //     shuffle(array);
        //     count[array.join('')]++;
        // }

        // // show counts of all possible permutations
        // for (let key in count) {
        //     alert(`${key}: ${count[key]}`);
        // }

        // let arr = [1, 2, 3];

        // shuffle(arr);
        // // arr = [3, 2, 1]

        // shuffle(arr);
        // // arr = [2, 1, 3]

        // shuffle(arr);
        // // arr = [3, 1, 2]

        function getAverageAge(users) {
            const sum = users.reduce((total, current) => total + current.age,0);
            return sum / users.length;
        }

        let john = { name: "John", age: 25 };
        let pete = { name: "Pete", age: 30 };
        let mary = { name: "Mary", age: 29 };

        let arr = [ john, pete, mary ];

        console.log( getAverageAge(arr) ); // (25 + 30 + 29) / 3 = 28

    </script>
  </body>

</html>